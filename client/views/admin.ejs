<!DOCTYPE html>
<html lang="ru">

<head>
    <%- include('partials/header', { title: 'Управление пользователями' }) %>
        <link rel="stylesheet" href="/css/admin.css">
</head>

<body>
    <%- include('partials/navbar', { activeLink: 'admin' , authButtons: false }) %>

        <div class="admin-container">
            <h1>Управление пользователями</h1>

            <!-- Поиск пользователей -->
            <div class="search-container">
                <input type="text" id="user-search" placeholder="Поиск пользователей...">
                <button id="search-button" class="btn primary">Поиск</button>
            </div>

            <!-- Кнопки для супер-админа -->
            <div id="super-admin-buttons" class="admin-actions" style="display: none;">
                <button id="add-role-btn" class="btn primary">Добавить роль</button>
                <button id="delete-role-btn" class="btn danger">Удалить роль</button>
            </div>

            <div class="admin-list">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Имя</th>
                            <th>Email</th>
                            <th>Роли</th>
                            <th>Дата добавления</th>
                            <th>Действия</th>
                        </tr>
                    </thead>
                    <tbody id="admins-table-body">
                        <!-- Список будет загружен через JS -->
                    </tbody>
                </table>
            </div>

            <!-- Модальное окно добавления роли -->
            <div id="add-role-modal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Добавить роль</h2>
                    <form id="add-role-form">
                        <div class="form-group">
                            <label for="role-name">Название роли*</label>
                            <input type="text" id="role-name" required>
                        </div>
                        <div class="form-group">
                            <label for="role-description">Описание</label>
                            <textarea id="role-description"></textarea>
                        </div>
                        <button type="submit" class="btn primary">Добавить</button>
                    </form>
                </div>
            </div>

            <!-- Модальное окно удаления роли -->
            <div id="delete-role-modal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Удалить роль</h2>
                    <form id="delete-role-form">
                        <div class="form-group">
                            <label for="delete-role-search">Выберите роль для удаления*</label>
                            <div class="search-role-container">
                                <input type="text" id="delete-role-search"
                                    placeholder="Начните вводить название роли..." autocomplete="off">
                                <div id="delete-role-dropdown" class="role-dropdown">
                                    <!-- Результаты поиска будут здесь -->
                                </div>
                            </div>
                            <input type="hidden" id="delete-role-id">
                        </div>
                        <button type="submit" class="btn danger">Удалить</button>
                    </form>
                </div>
            </div>

            <!-- Модальное окно добавления роли пользователю -->
            <div id="add-user-role-modal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Добавить роль пользователю</h2>
                    <form id="add-user-role-form">
                        <input type="hidden" id="target-user-id">
                        <div class="form-group">
                            <label for="user-role-select">Роль*</label>
                            <select id="user-role-select" required>
                                <!-- Роли будут загружены через JS -->
                            </select>
                        </div>
                        <button type="submit" class="btn primary">Добавить</button>
                    </form>
                </div>
            </div>

            <!-- Модальное окно удаления роли пользователя -->
            <div id="delete-user-role-modal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Удалить роль пользователя</h2>
                    <form id="delete-user-role-form">
                        <input type="hidden" id="delete-target-user-id">
                        <div class="form-group">
                            <label for="delete-user-role-select">Роль*</label>
                            <select id="delete-user-role-select" required>
                                <!-- Роли будут загружены через JS -->
                            </select>
                        </div>
                        <button type="submit" class="btn danger">Удалить</button>
                    </form>
                </div>
            </div>
        </div>

        <%- include('partials/footer') %>
            <script src="/js/admin.js"></script>
</body>

</html>